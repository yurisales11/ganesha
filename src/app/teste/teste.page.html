
<ion-header>
  <ion-toolbar style="padding: 10px;">
    <ion-item>
      <!-- Avatar com upload de imagem -->
      <ion-avatar aria-hidden="true" slot="start" (click)="selecionarImagem()">
        <img alt="Avatar" [src]="fotoAvatar || 'https://github.com/shadcn.png'" />
      </ion-avatar>

      <!-- Input invisível para upload de imagem -->
      <input
        type="file"
        accept="image/*"
        id="uploadAvatar"
        style="display: none;"
        (change)="atualizarAvatar($event)"/>

         <!-- Nome do Usuário - Bem-vindo + nome do usuário -->
         <ion-label>
          {{ usuarioNome || 'Usuário' }}
        </ion-label>
        

      <!-- Ícone de notificações -->
      <ion-buttons slot="end" style="padding: 0px 20px;">
        <ion-icon name="settings-outline" style="font-size: 25px;" routerLink="/perfil"></ion-icon>
      </ion-buttons>
    </ion-item>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="header">
    <div class="bemvindo">
      <div class="nome-container">
        <span> Olá, {{ usuarioNome || 'Usuário' }}!</span>
      </div>
      <ion-button fill="clear" class="visibility-button" (click)="alternarVisibilidade()">
        <ion-icon name="eye-outline" class="icon-visibility"></ion-icon>
      </ion-button>
    </div>

    <div class="saldo">
      <div class="money">
        <div class="brl">
          <h2>R$</h2>
        </div>
        <div class="saldomoney" [ngClass]="{'positivo': saldoAtual >= 0, 'negativo': saldoAtual < 0}">
          <!-- Aqui verificamos se o saldo está visível ou não -->
        <h3 *ngIf="saldoVisivel">{{ saldoAtual | number: '1.2-2' }}</h3>
        <h3 *ngIf="!saldoVisivel">••••••</h3>
        </div>
        
      </div>
      <h1>Saldo atual</h1>
    </div>
    
  </div>

  <div class="card" routerLink="/receitas">
    <div class="iconnome">
      <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="11" cy="11" r="11" fill="#12A454" />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M15.809 9.32874C15.809 9.32874 16.0637 8.67732 15.809 8.42881L11.4611 4.18638C11.2064 3.93787 10.7936 3.93787 10.5389 4.18638L6.19102 8.42881C5.93633 8.67732 5.93633 9.08025 6.19102 9.32874C6.44571 9.57726 6.85865 9.57726 7.11333 9.32874L10.3478 6.17268V13.1212C10.3478 13.7264 10.1564 14.6485 9.60114 15.4009C9.06992 16.1209 8.17875 16.7273 6.65218 16.7273C6.29199 16.7273 6 17.0122 6 17.3636C6 17.7151 6.29199 18 6.65218 18C8.60387 18 9.88662 17.1922 10.6597 16.1445C11.4089 15.1293 11.6522 13.9302 11.6522 13.1212V6.17268L14.8867 9.32874C15.1414 9.57726 15.809 9.32874 15.809 9.32874Z"
          fill="#253031"
        />
      </svg>
      <h2>Receitas</h2>
      <ion-buttons slot="end" style="margin-left: 133px;">
        <ion-icon name="chevron-forward" style="font-size: 24px; color: #ffffff;" routerLink="/receitas"></ion-icon>
      </ion-buttons>
    </div>
  
    <!-- Total de Receitas -->
    <div class="total">
      <div class = money>
      <div class = brl>
      <h2>R$</h2>
      </div>
      <div class = saldomoney2>
      <h2>{{ totalReceitas | number: '1.2-2' }}</h2>
    </div>
    </div>
    </div>
  
    <!-- Listagem de Receitas -->
    <ul>
      <div class="listareceitas" *ngFor="let receita of receitas">
        <li>
          <p>R$ {{ receita.valor | number: '1.2-2' }}</p>
        </li>
        <span>{{ receita.nome }}</span>
      </div>
    </ul>
  </div>
  
  
  

  <div class="card" routerLink="/conta">
    <div class = iconnome>
    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="11" cy="11" r="11" fill="#E83F5B"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M15.809 12.6713C16.0637 12.9197 16.0637 13.3227 15.809 13.5712L11.4611 17.8136C11.2064 18.0621 10.7936 18.0621 10.5389 17.8136L6.19102 13.5712C5.93633 13.3227 5.93633 12.9197 6.19102 12.6713C6.44571 12.4227 6.85865 12.4227 7.11333 12.6713L10.3478 15.8273V8.87879C10.3478 8.27356 10.1564 7.35152 9.60114 6.59908C9.06992 5.87914 8.17875 5.27273 6.65218 5.27273C6.29199 5.27273 6 4.98781 6 4.63636C6 4.28492 6.29199 4 6.65218 4C8.60387 4 9.88662 4.80776 10.6597 5.85547C11.4089 6.87068 11.6522 8.06984 11.6522 8.87879V15.8273L14.8867 12.6713C15.1414 12.4227 15.5543 12.4227 15.809 12.6713Z" fill="#253031"/>
      </svg>
      
    <h2>Despesas</h2>
    <!-- Ícone de notificações -->
    <ion-buttons slot="end" style="margin-left: 120px;">
      <ion-icon name="chevron-forward" style="font-size: 24px; color: #ffffff;" routerLink="/conta"></ion-icon>
      </ion-buttons>
    </div>
  
    <!-- Total de Contas -->
    <div class="total">
      <div class="money">
        <div class="brl">
          <h2>R$</h2>
        </div>
        <div class="saldomoney3">
          <h2>{{ totalContas | number: '1.2-2' }}</h2>
        </div>
      </div>
    </div>
  
    <!-- Listagem de Contas -->
    <ul>
      <div class="listadespesas" *ngFor="let conta of contas">
        <li>
          <p>R$ {{ conta.saldo | number: '1.2-2' }}</p>
        </li>
        <span>{{ conta.nome }}</span>
      </div>
    </ul>
  </div>

  <div class="card planejamento" routerLink="/planejamentos" >
    <div class = iconnome>
      <svg width="60" height="52" viewBox="0 0 60 52" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M10.9058 51.6159C10.9049 51.6159 10.9049 51.6159 10.9049 51.6159C9.57558 51.6159 8.33323 50.9017 7.66395 49.7557L3.98356 43.4457C3.87188 43.2552 3.81328 43.0374 3.81328 42.8158V27.9771H2.48292C1.91806 27.9771 1.42363 27.5989 1.27632 27.0542C1.12889 26.5086 1.36515 25.9327 1.85302 25.6479L44.2822 0.894871C44.8553 0.560641 45.5072 0.384033 46.1682 0.384033C47.4977 0.384033 48.7408 1.09632 49.4092 2.24445L59.4873 19.5195C60.531 21.3056 59.9249 23.6064 58.1396 24.6483L12.7927 51.1032C12.2187 51.4382 11.5668 51.6159 10.9058 51.6159Z" fill="#DA4453"/>
        <path opacity="0.1" d="M39.745 9.75433C39.5692 10.4227 39.9683 11.1057 40.6348 11.2814C41.3014 11.4572 41.986 11.0581 42.1617 10.3907C42.3375 9.72327 41.9384 9.03934 41.272 8.86367C40.6036 8.68882 39.9208 9.08704 39.745 9.75433Z" fill="#080808"/>
        <path opacity="0.1" d="M42.2643 14.0738C42.0885 14.7412 42.4876 15.4252 43.1542 15.601C43.8226 15.7758 44.5055 15.3776 44.6813 14.7093C44.8571 14.0418 44.458 13.3579 43.7914 13.1832C43.123 13.0073 42.44 13.4055 42.2643 14.0738Z" fill="#080808"/>
        <path opacity="0.1" d="M44.7839 18.3923C44.6081 19.0597 45.0072 19.7436 45.6738 19.9194C46.3421 20.0952 47.0251 19.696 47.2009 19.0285C47.3767 18.3602 46.9776 17.6772 46.311 17.5014C45.6426 17.3257 44.9596 17.7249 44.7839 18.3923Z" fill="#080808"/>
        <path opacity="0.1" d="M47.3034 22.7109C47.1277 23.3783 47.5268 24.0622 48.1933 24.238C48.8616 24.4138 49.5446 24.0146 49.7204 23.3471C49.8961 22.6797 49.497 21.9958 48.8304 21.82C48.1622 21.6443 47.4792 22.0435 47.3034 22.7109Z" fill="#080808"/>
        <path d="M52.2675 20.792C51.8371 20.792 51.4197 20.5704 51.1853 20.1721L44.8205 9.26279C44.4726 8.66687 44.674 7.90137 45.271 7.55355C45.868 7.20573 46.6334 7.40706 46.9813 8.0031L53.3461 18.9124C53.694 19.5085 53.4926 20.2739 52.8956 20.6217C52.6978 20.737 52.4817 20.792 52.2675 20.792Z" fill="#F6BB42"/>
        <path d="M21.6998 25.4503C21.2695 25.4503 20.8511 25.2287 20.6185 24.8305C20.2707 24.2344 20.472 23.469 21.069 23.1211L36.1853 14.3019C36.7804 13.9539 37.5458 14.1554 37.8937 14.7522C38.2416 15.3483 38.0402 16.1136 37.4451 16.4616L22.3288 25.2799C22.1302 25.3953 21.9141 25.4503 21.6998 25.4503Z" fill="#434A54"/>
        <path d="M24.2194 29.7697C23.7891 29.7697 23.3707 29.5481 23.1381 29.1489C22.7911 28.5522 22.9916 27.7878 23.5886 27.4398L38.7049 18.6205C39.3 18.2725 40.0652 18.474 40.4132 19.0709C40.7611 19.667 40.5597 20.4324 39.9647 20.7802L24.8483 29.5994C24.6496 29.7147 24.4335 29.7697 24.2194 29.7697Z" fill="#434A54"/>
        <path opacity="0.1" d="M56.25 21.615H8.76533L1.85303 25.6479C1.36505 25.9327 1.12891 26.5086 1.27633 27.0542C1.42376 27.5989 1.91807 27.9771 2.48293 27.9771H3.81317V42.8157C3.81317 43.0373 3.87177 43.2552 3.98345 43.4456L7.29036 49.1148H16.2012L58.1396 24.6481C58.6852 24.3286 59.1211 23.8919 59.4342 23.3874C58.7714 22.3245 57.5921 21.615 56.25 21.615Z" fill="#080808"/>
        <path d="M56.25 24.1152H3.75001C1.68181 24.1152 0 25.798 0 27.8654V47.8659C0 49.9331 1.68181 51.6158 3.75001 51.6158H56.25C58.319 51.6158 60 49.9331 60 47.8659V27.8654C60 25.798 58.319 24.1152 56.25 24.1152Z" fill="#ED5564"/>
        <path d="M47.8674 29.4822C47.3767 29.9692 47.3767 30.7603 47.8674 31.2492C48.3544 31.7381 49.1455 31.7381 49.6344 31.2492C50.1232 30.7603 50.1232 29.9692 49.6344 29.4822C49.1455 28.9932 48.3544 28.9932 47.8674 29.4822Z" fill="#DA4453"/>
        <path d="M47.8674 34.481C47.3767 34.9699 47.3767 35.761 47.8674 36.2499C48.3544 36.7369 49.1455 36.7369 49.6344 36.2499C50.1232 35.761 50.1232 34.9699 49.6344 34.481C49.1455 33.994 48.3544 33.994 47.8674 34.481Z" fill="#DA4453"/>
        <path d="M47.8674 39.4817C47.3767 39.9706 47.3767 40.7616 47.8674 41.2487C48.3544 41.7376 49.1455 41.7376 49.6344 41.2487C50.1232 40.7616 50.1232 39.9706 49.6344 39.4817C49.1455 38.9928 48.3544 38.9928 47.8674 39.4817Z" fill="#DA4453"/>
        <path d="M16.9181 45.6686C16.3349 45.6686 15.8131 45.2585 15.694 44.6634L13.9262 35.825C13.7907 35.1476 14.2292 34.4884 14.9067 34.3529C15.5833 34.2192 16.2425 34.6569 16.3771 35.3344L18.1449 44.1746C18.2804 44.8503 17.8419 45.5095 17.1644 45.645C17.0819 45.6611 16.9995 45.6686 16.9181 45.6686Z" fill="#E6E9ED"/>
        <path d="M15.1529 36.8301C15.0715 36.8301 14.9891 36.8209 14.9066 36.8063L6.06721 35.0376C5.39067 34.9021 4.95202 34.2429 5.08667 33.5672C5.22214 32.8897 5.88135 32.452 6.55801 32.5876L15.3965 34.3528C16.0739 34.4882 16.5125 35.1474 16.377 35.8249C16.2589 36.4183 15.737 36.8301 15.1529 36.8301Z" fill="#E6E9ED"/>
        <path d="M47.8674 44.4823C47.3767 44.9693 47.3767 45.7603 47.8674 46.2493C48.3544 46.7382 49.1455 46.7382 49.6344 46.2493C50.1232 45.7603 50.1232 44.9693 49.6344 44.4823C49.1455 43.9932 48.3544 43.9932 47.8674 44.4823Z" fill="#DA4453"/>
        <path d="M19.5713 31.1592C19.0834 30.6722 18.2915 30.6722 17.8035 31.1592L9.33033 39.6335H6.31266C5.62228 39.6335 5.06293 40.1938 5.06293 40.8822C5.06293 41.5744 5.62228 42.1327 6.31266 42.1327H8.59871V44.4198C8.59871 45.1083 9.15806 45.6686 9.84844 45.6686C10.5388 45.6686 11.0982 45.1083 11.0982 44.4198V41.4023L19.5713 32.9281C20.0593 32.4411 20.0593 31.6482 19.5713 31.1592Z" fill="#F5F7FA"/>
        <path d="M53.7488 45.4964C53.0603 45.4964 52.5 44.9361 52.5 44.2457V31.6152C52.5 30.9248 53.0603 30.3645 53.7488 30.3645C54.4409 30.3645 55.0013 30.9248 55.0013 31.6152V44.2457C55.0013 44.9362 54.441 45.4964 53.7488 45.4964Z" fill="#FFCE54"/>
        <path d="M25.0003 34.1147H42.4986C43.1908 34.1147 43.7512 33.5544 43.7512 32.8659C43.7512 32.1738 43.1909 31.6152 42.4986 31.6152H25.0003C24.31 31.6152 23.7498 32.1738 23.7498 32.8659C23.7498 33.5544 24.31 34.1147 25.0003 34.1147Z" fill="#434A54"/>
        <path d="M42.4986 36.616H25.0003C24.31 36.616 23.7498 37.176 23.7498 37.8645C23.7498 38.5567 24.31 39.1152 25.0003 39.1152H42.4986C43.1908 39.1152 43.7512 38.5567 43.7512 37.8645C43.7512 37.176 43.1909 36.616 42.4986 36.616Z" fill="#434A54"/>
        <path d="M34.9987 41.6147H25.0003C24.31 41.6147 23.7498 42.1748 23.7498 42.8652C23.7498 43.5556 24.31 44.1158 25.0003 44.1158H34.9987C35.6909 44.1158 36.2513 43.5556 36.2513 42.8652C36.2513 42.1748 35.691 41.6147 34.9987 41.6147Z" fill="#434A54"/>
        </svg>
        
        
        
        
      
    <h2>Planejamentos</h2>
    <!-- Ícone de notificações -->
    <ion-buttons slot="end" style="margin-left: 60px;">
      <ion-icon name="chevron-forward" style="font-size: 24px; color: #ffffff;" routerLink="/planejamentos"></ion-icon>

    </ion-buttons>
   
    </div>

    
    <div *ngFor="let planejamento of planejamentos" class = "account-info" >
      <div class="account-info">
      <span>{{ planejamento.nome }}</span>
     </div>
      
      
      <div class="progress-container">
        <ion-progress-bar [value]="planejamento.progresso / 100" class="custom-progress-bar"></ion-progress-bar>
        <div class="progress-text">
          Restam R$ {{ planejamento.restante | number: '1.2-2' }}
        </div>
        <span>{{ planejamento.progresso | number: '1.0-0' }}%</span>
      </div>
      
    </div>
    
    
  </div>

 <div *ngIf="artigos.length > 0; else noArtigos">
  <div class="artigo-card card" *ngFor="let artigo of artigos">
    <div class="iconnome">
      <svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M16 9.06644V10.0664" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M16 16.0664V17.0664" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M17 10.0664H15.5C14.7 10.0664 14 10.7664 14 11.5664C14 12.3664 14.7 13.0664 15.5 13.0664H16.5C17.3 13.0664 18 13.7664 18 14.5664C18 15.3664 17.3 16.0664 16.5 16.0664H15" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M24 12.0664C24 7.36643 19.9 3.56643 15.1 4.16643C11.6 4.56643 8.7 7.36643 8.1 10.8664C7.7 13.4664 8.6 15.9664 10.2 17.6664C11.4 18.8664 12 20.4664 12 22.1664H20C20 20.5664 20.6 18.8664 21.7 17.7664C23.1 16.1664 24 14.2664 24 12.0664Z" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M20 25.0664H12" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M19 26.0664C19 27.7664 17.7 29.0664 16 29.0664C14.3 29.0664 13 27.7664 13 26.0664" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M4 13.0664H2" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M7.5 21.5664L6.1 22.9664" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M24.5 21.5664L25.9 22.9664" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M28 13.0664H30" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M24.5 4.56644L25.9 3.16644" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M7.5 4.56644L6.1 3.16644" stroke="white" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <h2>{{ artigo.title }}</h2>
    </div>

    <!-- Imagem -->
    <div class="artigo-card-imagem">
      <img [src]="artigo.imagemUrl" alt="{{ artigo.titulo }}" class="artigo-card-img" />
    </div>

    <!-- Conteúdo -->
    <div class="artigo-card-conteudo">
      <h2 class="artigo-card-titulo">{{ artigo.titulo }}</h2>
      <p class="artigo-card-resumo">{{ artigo.resumo }}</p>
    </div>

    <!-- Botão -->
    <div class="artigo-card-botao">
    
      <ion-button (click)="abrirArtigo(artigo.url)"  color="primary" size="default" expand="block">Saiba Mais</ion-button>
     
    </div>
  </div>
</div>

<ng-template #noArtigos>
  <p>Nenhum artigo disponível para o perfil selecionado.</p>
</ng-template>



  
</ion-content>


<ion-footer color = dark>
  <ion-toolbar class="custom-footer-toolbar">
    <ion-segment class="custom-segment">
      <ion-segment-button value="home" routerLink ="/teste">
        <ion-icon name="home-outline" color = light routerLink ="/usuario"></ion-icon>
      </ion-segment-button>

      <ion-segment-button value="add" routerLink ="/artigos">
        <ion-icon name="add-circle-outline"color = light routerLink ="/artigos"></ion-icon>
      </ion-segment-button>
      
      <ion-segment-button value="settings" routerLink ="/perfil">
        <ion-icon name="settings-outline"color = light  routerLink ="/perfil"></ion-icon>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-footer>
